<script>
  new Vue({
    el: '#header-view',
    data: function () {
      return {
        unread_message_count: 0
      }
    },
    created: function () {
      this.get_unread_message_count()
    },
    methods: {
      get_unread_message_count: function () {// 获取当前登录用户信息
        var that = this
        _server.get_unread_message_count().then(function (res) {
          that.$nextTick(function () {
            if (res.state === 'success') {
              that.unread_message_count = res.data.unread_message_count
            }
          })
        })
      },
    }
  })
</script>

</html>