(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{a3faf5b7a5cd9c6de716:function(e,t,a){"use strict";a.r(t);a("16f858f3f384ce88563c");var n=a("38b775c111ad54477772"),r=(a("e203e9cdf1d04b987c70"),a("51ee6e570e2670da87a8")),c=(a("5e569c16e4680660800b"),a("1217f17bae420d4493e1")),i=(a("49c75c275b7cf4e85448"),a("450c3cfe32c632873e75")),o=(a("396e0dd03397a933ee2d"),a("5ee5360c13f822fd1f96")),l=(a("ccca5c1b00f8430f3746"),a("bea61fa5539cd12254c4")),s=(a("84fdc10c7305fb37dd40"),a("23324ffdd5712bdb1e5e")),u=a("3f489e511c06ad55a145"),f=a.n(u),d=a("7786c0fe89da92a9c05c"),p=(a("af4c3e71a317ae78110c"),a("41aca8bac90a667dc80d")),m=function(e,t){return function(a){p.a.get("/api/get_article_list",e).then(function(e){return t&&t(e),a({type:"GET_ARTICLE_LIST",data:e})})}},b=function(e,t){return function(){p.a.post("/api/edit_article",e).then(function(e){t&&t(e)})}},y=function(e,t){return function(){p.a.post("/api/delete_article",e).then(function(e){t&&t(e)})}},h=a("5d6d9fb93f54f7c9adf8");function _(e){return(_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){x(e,t,a[t])})}return e}function E(e,t,a,n,r,c,i){try{var o=e[c](i),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(n,r)}function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var C=s.a.Option,N=l.a.Item,T=o.a.confirm,j=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=w(t).call(this,e),a=!r||"object"!==_(r)&&"function"!==typeof r?S(n):r,x(S(S(a)),"TablePageChange",function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,a.setState({pagination:{current:t.current}});case 4:a.fetch_article_list(t);case 5:case"end":return e.stop()}},e,this)}),function(){var t=this,a=arguments;return new Promise(function(n,r){var c=e.apply(t,a);function i(e){E(c,n,r,i,o,"next",e)}function o(e){E(c,n,r,i,o,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()),x(S(S(a)),"handleSubmit",function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.fetch_user_edit(t)})}),x(S(S(a)),"fetch_article_delete",function(e){a.props.dispatch(y(e,function(e){h.a.message_success("\u5220\u9664\u6587\u7ae0\u6210\u529f"),a.fetch_article_list()}))}),x(S(S(a)),"fetch_article_list",function(){var e=S(S(a));a.setState({loading:!0});var t=a.state.pagination.current;a.props.dispatch(m({params:{page:t}},function(a){var n=v({},e.state.pagination);n.total=a.count,n.current=t,e.setState({loading:!1,pagination:n})}))}),x(S(S(a)),"fetch_user_edit",function(e){a.props.dispatch(b(v({aid:a.props.state_article.current_info.aid},e),function(e){h.a.message_success("\u4fee\u6539\u7528\u6237\u6210\u529f"),a.fetch_article_list(),a.setState({modal_visible_edit:!1})}))}),a.state={columns:[{title:"aid",dataIndex:"aid",key:"aid"},{title:"\u6807\u9898",dataIndex:"title",key:"title"},{title:"\u6982\u8981",dataIndex:"excerpt",key:"excerpt"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_date",key:"create_date"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e,t){return f.a.createElement(i.a,{className:"table-article-tag-list",color:"orange"},a.state.status[t.status])}},{title:"\u7c7b\u578b",dataIndex:"type",key:"type",render:function(e,t){return f.a.createElement(i.a,{className:"table-article-tag-list",color:"red"},a.state.type[t.type])}},{title:"\u6765\u6e90",dataIndex:"source",key:"source",render:function(e,t){return console.log("record",t),f.a.createElement(i.a,{className:"table-article-tag-list",color:"red"},a.state.source[Number(t.source)-1])}},{title:"\u9605\u8bfb\u6570",dataIndex:"read_count",key:"read_count",render:function(e,t){return f.a.createElement(i.a,{className:"table-article-tag-list",color:"green"},t.read_count)}},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return f.a.createElement("div",{className:"table-right-btn"},f.a.createElement(c.a,{onClick:function(){a.editUser(t)},size:"small",type:"primary"},"\u4fee\u6539"),f.a.createElement(c.a,{className:"box-btn-red",onClick:function(){a.deleteArticle(t)},size:"small"},"\u5220\u9664"))}}],pagination:{},modal_visible_edit:!1,loading:!1,status:["\u8349\u7a3f","\u5ba1\u6838\u4e2d","\u5ba1\u6838\u901a\u8fc7","\u56de\u6536\u7ad9"],type:["","\u6587\u7ae0","\u8bf4\u8bf4","\u89c6\u9891","\u516c\u544a"],source:["\u539f\u521b","\u8f6c\u8f7d"]},a}var a,u,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,f.a.Component),a=t,(u=[{key:"componentDidMount",value:function(){this.fetch_article_list()}},{key:"editUser",value:function(e){this.setState({modal_visible_edit:!0}),this.props.dispatch({type:"ARTICLE_SET_CURRENT_INFO",data:e}),this.props.form.setFieldsValue({status:String(e.status),type:e.type,source:e.source})}},{key:"deleteArticle",value:function(e){var t=this;this.props.dispatch({type:"ARTICLE_SET_CURRENT_INFO",data:e}),T({title:"\u786e\u8ba4\u8981\u5220\u9664\u6b64\u6587\u7ae0\u5417\uff1f",content:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u9006\u8f6c",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.fetch_article_delete({aid:t.props.state_article.current_info.aid})},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t=this.state.loading,a=this.props.state_article,i=void 0===a?{}:a,u=this.props.form.getFieldDecorator,d=(u("prefix",{initialValue:"86"})(f.a.createElement(s.a,{style:{width:70}},f.a.createElement(C,{value:"86"},"+86"),f.a.createElement(C,{value:"87"},"+87"))),{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}});return f.a.createElement("div",{className:"layout-main"},f.a.createElement("div",{className:"layout-main-title"},f.a.createElement(r.a,{type:"user"})," ",f.a.createElement("em",null,"\u6743\u9650\u83dc\u5355")),f.a.createElement("div",{className:"admin-article"},f.a.createElement(o.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"\u4fee\u6539\u6587\u7ae0",visible:this.state.modal_visible_edit},f.a.createElement(l.a,{className:"from-view",onSubmit:this.handleSubmit},f.a.createElement(N,g({},d,{hasFeedback:!0,label:"\u72b6\u6001"}),u("status",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u72b6\u6001\uff01"}]})(f.a.createElement(s.a,{placeholder:"\u72b6\u6001"},this.state.status.map(function(e,t){return f.a.createElement(C,{key:t},e)})))),f.a.createElement(N,g({},d,{hasFeedback:!0,label:"\u7c7b\u578b"}),u("type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7c7b\u578b\uff01"}]})(f.a.createElement(s.a,{placeholder:"\u7c7b\u578b"},this.state.type.map(function(e,t){return f.a.createElement(C,{key:t},e)})))),f.a.createElement(N,g({},d,{hasFeedback:!0,label:"\u6765\u6e90"}),u("source",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6765\u6e90\uff01"}]})(f.a.createElement(s.a,{placeholder:"\u6765\u6e90"},f.a.createElement(C,{key:"1"},"\u539f\u521b"),f.a.createElement(C,{key:"2"},"\u8f6c\u8f7d")))),f.a.createElement(N,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},f.a.createElement(c.a,{className:"register-btn",htmlType:"submit",type:"primary"},"\u66f4\u65b0")))),f.a.createElement("div",{className:"layout-table"},f.a.createElement(n.a,{columns:this.state.columns,dataSource:i.list,loading:t,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"aid"}))))}}])&&k(a.prototype,u),d&&k(a,d),t}(),I=l.a.create()(j);t.default=Object(d.connect)(function(e){return{state_article:e.state_article}})(I)},af4c3e71a317ae78110c:function(e,t,a){}}]);