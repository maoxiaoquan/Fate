(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"6d261f6180e431d203e1":function(e,t,n){},d35f87d04a2556115fa9:function(e,t,n){"use strict";n.r(t);n("dd1ecc38b32295d28890");var a,r,c=n("22b0af3c86168fc91a4c"),i=(n("a52713c529e7e40adb61"),n("4749dc165f579f563092")),o=(n("ad4ecbed0bbce0cf261b"),n("6573eaffc95190f3a1a5")),l=(n("1512f71111e678bdc301"),n("54d09d2169758098c3cb")),s=(n("55aa7ca4a0a8a48c9e61"),n("fbb809245daa6bdefd4c")),u=(n("7b2cdc79ef95600c96fa"),n("ba2f3da11de1bc903512")),f=(n("0b403e9de8531798815b"),n("f93e88075e502b066463")),d=(n("2f3650d48acaa2aad9af"),n("29279c61aa3570bb3814")),p=(n("111ae47c12716851841c"),n("c206fca74049d124e35c")),m=(n("ec4109717b506939221b"),n("1d945b5a0267d56ef3e4")),b=n("3f489e511c06ad55a145"),_=n.n(b),y=n("7786c0fe89da92a9c05c"),h=n("421012ac680b4f6cac50"),v=(n("6d261f6180e431d203e1"),n("41aca8bac90a667dc80d")),g=function(e,t){return function(n){v.a.get("/api/banner_list",e).then(function(e){return t&&t(e),n({type:"GET_BANNER_LIST",data:e})})}},E=function(e,t){return function(n){v.a.post("/api/create_banner",e).then(function(e){t&&t(e)})}},w=function(e,t){return function(){v.a.post("/api/update_banner",e).then(function(e){t&&t(e)})}},x=function(e,t){return function(){v.a.post("/api/delete_banner",e).then(function(e){t&&t(e)})}},k=n("5d6d9fb93f54f7c9adf8");function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){R(e,t,n[t])})}return e}function C(e,t,n,a,r,c,i){try{var o=e[c](i),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function j(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var c=e.apply(t,n);function i(e){C(c,a,r,i,o,"next",e)}function o(e){C(c,a,r,i,o,"throw",e)}i(void 0)})}}function P(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=m.a.Option,F=p.a.Item,q=d.a.confirm,A=(f.a.TextArea,a=Object(y.connect)(function(e){return{state_banner:e.state_banner}}),Object(h.withRouter)(r=a(r=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=T(t).call(this,e),n=!r||"object"!==N(r)&&"function"!==typeof r?I(a):r,R(I(I(n)),"_edit",function(e){n.setState({modal_visible_edit:!0,is_create:!1}),n.props.dispatch({type:"SET_BANNER_INFO",data:e}),n.props.form.setFieldsValue({title:e.title,article_url:e.article_url,img_url:e.img_url,type:e.type,sort:e.sort,description:e.description,enable:e.enable})}),R(I(I(n)),"_delete",function(e){n.props.dispatch({type:"SET_BANNER_INFO",data:e}),q({title:"\u786e\u8ba4\u8981\u5220\u9664\u6b64\u6807\u7b7e\u5417\uff1f",content:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u9006\u8f6c",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){n.fetch_delete_banner({id:n.props.state_banner.current_info.id})},onCancel:function(){console.log("Cancel")}})}),R(I(I(n)),"TablePageChange",function(){var e=j(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,n.setState({pagination:{current:t.current}});case 4:n.fetch_banner_list(t);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),R(I(I(n)),"showModal",function(){n.props.form.resetFields(),n.setState({modal_visible_edit:!0,is_create:!0})}),R(I(I(n)),"handleSubmit",function(e){e.preventDefault();var t=n.state.is_create;n.props.form.validateFieldsAndScroll(function(e,a){e||(console.log("Received values of form: ",a),t?n.fetch_create_banner(a):n.fetch_update_banner(a))})}),R(I(I(n)),"handleConfirmBlur",function(e){var t=e.target.value;n.setState({confirmDirty:n.state.confirmDirty||!!t})}),R(I(I(n)),"selectRole",function(e){n.setState({role_id:e})}),R(I(I(n)),"validateToNextPassword",function(e,t,a){var r=n.props.form;t&&n.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),a()}),R(I(I(n)),"fetch_create_banner",function(e){n.props.dispatch(E(e,function(e){k.a.message_success("\u521b\u5efaBanner\u6210\u529f"),n.fetch_banner_list(),n.setState({modal_visible_edit:!1})}))}),R(I(I(n)),"fetch_update_banner",function(e){n.props.dispatch(w(S({id:n.props.state_banner.current_info.id},e),function(e){k.a.message_success("\u4fee\u6539Banner\u6210\u529f"),n.fetch_banner_list(),n.setState({modal_visible_edit:!1})}))}),R(I(I(n)),"fetch_delete_banner",function(e){n.props.dispatch(x(e,function(e){k.a.message_success("\u5220\u9664Banner\u6210\u529f"),n.fetch_banner_list()}))}),R(I(I(n)),"switch_banner_type",function(){var e=j(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({current_banner_type:t});case 2:n.fetch_banner_list();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),R(I(I(n)),"fetch_banner_list",function(){var e=I(I(n));n.setState({loading:!0});var t=n.state,a=t.pagination.current,r=t.current_banner_type;n.props.dispatch(g({params:{page:a,type:r}},function(t){var n=S({},e.state.pagination);n.total=t.count,n.current=a,e.setState({loading:!1,pagination:n})}))}),n.state={columns:[{title:"\u5e8f\u53f7",dataIndex:"index",key:"index",render:function(e,t,a){return _.a.createElement("span",{style:{width:"20px",display:"block"}},Number(10*(n.state.pagination.current-1))+a+1)}},{title:"\u6807\u9898",dataIndex:"title",key:"title"},{title:"\u6587\u7ae0\u94fe\u63a5",dataIndex:"article_url",key:"article_url"},{title:"\u56fe\u7247\u94fe\u63a5",dataIndex:"img_url",key:"img_url",render:function(e,t){return _.a.createElement("div",{className:"banner-img-preview"},_.a.createElement("img",{src:t.img_url,alt:""}))}},{title:"\u7c7b\u578b",dataIndex:"type",key:"type",render:function(e,t){return _.a.createElement("div",{className:"table-enable"},n.state.banner_type.map(function(e){if(e.id===t.type)return _.a.createElement(u.a,{color:"volcano",key:e.id},e.text)}))}},{title:"\u5e8f\u53f7",dataIndex:"sort",key:"sort",render:function(e,t){return _.a.createElement(u.a,{color:"volcano"},t.sort)}},{title:"\u63cf\u8ff0",dataIndex:"description",key:"description"},{title:"\u662f\u5426\u53ef\u4ee5\u7528",dataIndex:"enable",key:"enable",render:function(e,t){return _.a.createElement("div",{className:"table-enable"},e?_.a.createElement(s.a,{type:"check-circle"}):_.a.createElement(s.a,{type:"close-circle"}))}},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return _.a.createElement("div",{className:"table--btn"},_.a.createElement(l.a,{onClick:function(){n._edit(t)},size:"small",type:"primary"},"\u4fee\u6539"),_.a.createElement(l.a,{className:"box-btn-red",onClick:function(){n._delete(t)},size:"small"},"\u5220\u9664"))}}],pagination:{current:1},loading:!1,confirmDirty:!1,modal_visible_edit:!1,modal_visible_authority:!1,is_create:!0,role_id:"",banner_type:[{id:"1",text:"\u9996\u9875\u8f6e\u64ad\u56fe"},{id:"2",text:"\u9996\u9875\u5e7f\u544a"}],current_banner_type:""},n}var n,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,_.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){this.fetch_banner_list()}},{key:"render",value:function(){var e=this,t=this.props.state_banner,n=this.state,a=n.loading,r=n.is_create,u=n.banner_type,b=this.props.form.getFieldDecorator,y={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}};return _.a.createElement("div",{className:"layout-main"},_.a.createElement("div",{className:"layout-main-title"},_.a.createElement(s.a,{type:"user"})," ",_.a.createElement("em",null,"Banner\u7ba1\u7406")),_.a.createElement("div",{className:"layout-nav-btn"},_.a.createElement(l.a,{className:"article-tag-user-create-btn layout-btn",icon:"plus",type:"primary",onClick:function(){return e.showModal(0)}},"\u521b\u5efaBanner")),_.a.createElement("div",{className:"banner-lay layout-card-view"},_.a.createElement(d.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"\u521b\u5efaBanner",visible:this.state.modal_visible_edit},_.a.createElement(p.a,{className:"from-view",onSubmit:this.handleSubmit},_.a.createElement(F,O({},y,{label:"\u6807\u9898"}),b("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898\uff01",whitespace:!0}]})(_.a.createElement(f.a,{placeholder:"\u6807\u9898"}))),_.a.createElement(F,O({},y,{label:"\u6587\u7ae0\u94fe\u63a5"}),b("article_url",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6587\u7ae0\u94fe\u63a5\uff01",whitespace:!0}]})(_.a.createElement(f.a,{placeholder:"\u6587\u7ae0\u94fe\u63a5"}))),_.a.createElement(F,O({},y,{label:"\u56fe\u7247\u94fe\u63a5"}),b("img_url",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u56fe\u7247\u94fe\u63a5\uff01",whitespace:!0}]})(_.a.createElement(f.a,{placeholder:"\u56fe\u7247\u94fe\u63a5"}))),_.a.createElement(F,O({},y,{hasFeedback:!0,label:"Banner\u7c7b\u578b"}),b("type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9Banner\u7c7b\u578b\uff01"}]})(_.a.createElement(m.a,{placeholder:"Banner\u7c7b\u578b\uff01"},u.map(function(e){return _.a.createElement(D,{value:e.id,key:e.id},e.text)})))),_.a.createElement(p.a.Item,O({},y,{label:"\u5e8f\u53f7"}),b("sort",{initialValue:1})(_.a.createElement(o.a,{min:1,max:10})),_.a.createElement("span",{className:"ant-form-text"}," \u5e8f\u53f7")),_.a.createElement(F,O({},y,{label:"\u63cf\u8ff0"}),b("description",{rules:[{required:!0,message:"\u63cf\u8ff0\uff01",whitespace:!0}]})(_.a.createElement(f.a,{placeholder:"\u63cf\u8ff0"}))),_.a.createElement(F,O({},y,{label:"\u662f\u5426\u6709\u6548"}),b("enable",{valuePropName:"checked"})(_.a.createElement(i.a,null))),_.a.createElement(F,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},_.a.createElement(l.a,{className:"create-btn",htmlType:"submit",type:"primary"},r?"\u521b\u5efa":"\u66f4\u65b0")))),_.a.createElement("div",{className:"nav-search-view"},_.a.createElement("label",{className:"label-text"},"\u7c7b\u578b:"),_.a.createElement(l.a,{onClick:function(){e.switch_banner_type("")}},"\u5168\u90e8"),u.map(function(t){return _.a.createElement(l.a,{key:t.id,onClick:function(){e.switch_banner_type(t.id)}},t.text)})),_.a.createElement(c.a,{columns:this.state.columns,dataSource:t.list,loading:a,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"id"})))}}])&&P(n.prototype,a),r&&P(n,r),t}())||r)||r),M=p.a.create()(A);t.default=M}}]);