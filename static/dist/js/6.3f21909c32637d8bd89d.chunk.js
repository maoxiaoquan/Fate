(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"62b876d829a93e0fcd88":function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return c}),n.d(t,"e",function(){return o}),n.d(t,"b",function(){return s});var a=n("41aca8bac90a667dc80d"),r=function(e,t){return function(n){a.a.get("/api/get_user_tag_list",e).then(function(e){return t&&t(e),n({type:"GET_USER_TAG_LIST",data:e})})}},i=function(e,t){return function(n){a.a.get("/api/get_user_tag_all",e).then(function(e){t&&t(e)})}},c=function(e,t){return function(n){a.a.post("/api/create_user_tag",e).then(function(e){t&&t(e)})}},o=function(e,t){return function(){a.a.post("/api/update_user_tag",e).then(function(e){t&&t(e)})}},s=function(e,t){return function(){a.a.post("/api/delete_user_tag",e).then(function(e){t&&t(e)})}}},"64ef6a9155421cd72c4d":function(e,t,n){"use strict";n.r(t);n("16f858f3f384ce88563c");var a=n("38b775c111ad54477772"),r=(n("09a671f59d358d8613cb"),n("2d9a0e0aab9180839a0b")),i=(n("f64a93eb9111f8ff70de"),n("209ab97d27c4dc65994d")),c=(n("5e569c16e4680660800b"),n("1217f17bae420d4493e1")),o=(n("e203e9cdf1d04b987c70"),n("51ee6e570e2670da87a8")),s=(n("49c75c275b7cf4e85448"),n("450c3cfe32c632873e75")),u=(n("396e0dd03397a933ee2d"),n("5ee5360c13f822fd1f96")),l=(n("ccca5c1b00f8430f3746"),n("bea61fa5539cd12254c4")),f=(n("84fdc10c7305fb37dd40"),n("23324ffdd5712bdb1e5e")),d=n("3f489e511c06ad55a145"),p=n.n(d),_=n("7786c0fe89da92a9c05c"),m=(n("ff5cc0f6f507380a0db0"),n("41aca8bac90a667dc80d")),b=function(e,t){return function(){m.a.post("/api/edit_user",e).then(function(e){t&&t(e)})}},h=n("5d6d9fb93f54f7c9adf8"),y=n("62b876d829a93e0fcd88");function g(e){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function E(e,t,n,a,r,i,c){try{var o=e[i](c),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(a,r)}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){T(e,t,n[t])})}return e}function w(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=f.a.Option,x=l.a.Item,C=u.a.confirm,P=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=S(t).call(this,e),n=!r||"object"!==g(r)&&"function"!==typeof r?N(a):r,T(N(N(n)),"fetch_user_edit",function(e){n.props.dispatch(b(k({uid:n.props.state_user.current_user_info.uid},e),function(e){h.a.message_success("\u4fee\u6539\u7528\u6237\u6210\u529f"),n.fetch_user_list(),n.setState({modal_visible_edit:!1})}))}),n.state={columns:[{title:"\u6635\u79f0",dataIndex:"nickname",key:"nickname"},{title:"\u90ae\u7bb1",dataIndex:"email",key:"email"},{title:"\u624b\u673a",dataIndex:"phone",key:"phone",render:function(e,t){return p.a.createElement("div",null,e||"\u65e0")}},{title:"\u62e5\u6709\u7684\u89d2\u8272\u6807\u7b7e",dataIndex:"user_tag_ids",key:"user_tag_ids",render:function(e,t){return p.a.createElement("div",{className:"table-article-tag-view"},n.state.user_tag_all.map(function(e,n){return(t.user_tag_ids?t.user_tag_ids.split(","):[]).map(function(t,n){if(e.user_tag_id===Number(t))return p.a.createElement(s.a,{className:"table-article-tag-list",key:n,color:"purple"},e.user_tag_name)})}))}},{title:"\u662f\u5426\u53ef\u4ee5\u767b\u9646",dataIndex:"enable",key:"enable",render:function(e,t){return p.a.createElement("div",{className:"table-is-login"},e?p.a.createElement(o.a,{type:"check-circle"}):p.a.createElement(o.a,{type:"close-circle"}))}},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return p.a.createElement("div",{className:"table-right-btn"},p.a.createElement(c.a,{onClick:function(){n.editUser(t)},size:"small",type:"primary"},"\u4fee\u6539"),p.a.createElement(c.a,{className:"box-btn-red",onClick:function(){n.deleteUser(t)},size:"small"},"\u5220\u9664"))}}],pagination:{},modal_visible_edit:!1,loading:!1,user_tag_all:[]},n}var n,d,_;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,p.a.Component),n=t,(d=[{key:"componentDidMount",value:function(){console.log("this.props",this.props.routes),this.fetch_user_list(),this.fetch_user_tag_all()}},{key:"editUser",value:function(e){this.setState({modal_visible_edit:!0}),this.props.dispatch({type:"SET_CURRENT_USER_INFO",data:e}),this.props.form.setFieldsValue({nickname:e.nickname,user_tag_ids:e.user_tag_ids?e.user_tag_ids.split(","):[],enable:e.enable})}},{key:"deleteUser",value:function(e){var t=this;this.props.dispatch({type:"SET_CURRENT_USER_INFO",data:e}),C({title:"\u786e\u8ba4\u8981\u5220\u9664\u6b64\u7528\u6237\u5417\uff1f",content:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u9006\u8f6c",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t.fetch_user_delete({uid:t.props.state_user.current_user_info.uid})},onCancel:function(){console.log("Cancel")}})}},{key:"TablePageChange",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return{}.current=t.current,e.next=4,this.setState({pagination:{current:t.current}});case 4:this.fetch_user_list(t);case 5:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){E(i,a,r,c,o,"next",e)}function o(e){E(i,a,r,c,o,"throw",e)}c(void 0)})});return function(e){return t.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll(function(e,n){e||t.fetch_user_edit(n)})}},{key:"fetch_user_tag_all",value:function(){var e=this;this.props.dispatch(Object(y.c)("",function(t){e.setState({user_tag_all:t.user_tag_all?t.user_tag_all:[]})}))}},{key:"fetch_user_delete",value:function(e){var t,n,a=this;this.props.dispatch((t=e,n=function(e){h.a.message_success("\u5220\u9664\u7528\u6237\u6210\u529f"),a.fetch_user_list()},function(){m.a.post("/api/delete_user",t).then(function(e){n&&n(e)})}))}},{key:"fetch_user_list",value:function(){var e=this;this.setState({loading:!0});var t,n,a=this.state.pagination.current;this.props.dispatch((t={params:{page:a}},n=function(t){var n=k({},e.state.pagination);n.total=t.count,n.current=a,e.setState({loading:!1,pagination:n})},function(e){m.a.get("/api/get_user_list",t).then(function(t){return n&&n(t),e({type:"GET_USER_LIST",data:t})})}))}},{key:"render",value:function(){var e=this,t=this.state.loading,n=this.props.state_user,s=void 0===n?{}:n,d=this.props.form.getFieldDecorator,_=(d("prefix",{initialValue:"86"})(p.a.createElement(f.a,{style:{width:70}},p.a.createElement(j,{value:"86"},"+86"),p.a.createElement(j,{value:"87"},"+87"))),{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}});return p.a.createElement("div",{className:"layout-main"},p.a.createElement("div",{className:"layout-main-title"},p.a.createElement(o.a,{type:"user"})," ",p.a.createElement("em",null,"\u6807\u7b7e\u7ba1\u7406")),p.a.createElement("div",{className:"layout-nav-btn"}),p.a.createElement("div",{className:"admin-web-user"},p.a.createElement(u.a,{footer:null,onCancel:function(){e.setState({modal_visible_edit:!1})},title:"\u4fee\u6539\u7528\u6237",visible:this.state.modal_visible_edit},p.a.createElement(l.a,{className:"from-view",onSubmit:this.handleSubmit.bind(this)},p.a.createElement(x,v({},_,{label:"\u6635\u79f0"}),d("nickname",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6635\u79f0\uff01",whitespace:!0}]})(p.a.createElement(i.a,{placeholder:"\u6635\u79f0"}))),p.a.createElement(x,v({},_,{label:"\u7528\u6237\u89d2\u8272\u6807\u7b7e"}),d("user_tag_ids",{rules:[{required:!1,message:"\u8bf7\u9009\u62e9\u6587\u7ae0\u4e13\u680f\u4e0b\u5c5e\u4e13\u9898!",type:"array"}]})(p.a.createElement(f.a,{mode:"multiple",placeholder:"\u8bf7\u9009\u62e9\u6587\u7ae0\u4e13\u680f\u4e0b\u5c5e\u4e13\u9898"},this.state.user_tag_all.map(function(e){return p.a.createElement(j,{key:e.user_tag_id},e.user_tag_name)})))),p.a.createElement(x,v({},_,{label:"\u662f\u5426\u53ef\u767b\u5f55"}),d("enable",{valuePropName:"checked"})(p.a.createElement(r.a,null))),p.a.createElement(x,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:5}}},p.a.createElement(c.a,{className:"register-btn",htmlType:"submit",type:"primary"},"\u786e\u5b9a")))),p.a.createElement("div",{className:"layout-table"},p.a.createElement(a.a,{columns:this.state.columns,dataSource:s.user_list,loading:t,onChange:this.TablePageChange.bind(this),pagination:this.state.pagination,rowKey:"uid"}))))}}])&&w(n.prototype,d),_&&w(n,_),t}(),R=l.a.create()(P);t.default=Object(_.connect)(function(e){return{state_user:e.state_user}})(R)},ff5cc0f6f507380a0db0:function(e,t,n){}}]);