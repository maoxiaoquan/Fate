<!--header.ejs start-->
<% include ../parts/header.ejs %>
<!--header.ejs end-->

<body class="black-theme">

<!--header_view.ejs start-->
<% include ../parts/header_view.ejs %>
<!--header_view.ejs end-->


<!--article-list-lay layout-content start-->
<section class="user-lay layout-content" id="user-center-topic">
    <div class="container  box-container">
        <div class="row">

            <div class="col-xs-12 col-sm-8 col-md-8 main">

                <% include user_center_top.ejs %>

                <div class="user-article-topic">

                    <button id="show-modal" @click="showModal = true">Show Modal</button>
                    <!-- use the modal component, pass in the prop -->
                    <modal v-if="showModal" @close="showModal = false">
                        <!--
                          you can use custom content here to overwrite
                          default content
                        -->
                        <h3 slot="header">custom header</h3>
                    </modal>

                    <% if(user_info.uid === data.current_user.uid){ %>
                    <a class="btn btn-green" href="javascript:;" @click="create_new_user_topic">创建新专题</a>
                    <% } %>
                    <ul>
                        <% data.user_article_topic_all.forEach(function (item, key) { %>
                        <li class="topic-content-box">
                            <div class="topic-content-box-view">
                                <a href="/user/<%= data.current_user.uid %>/article/<%= item.user_article_topic_id %>"
                                   class="title"><%= item.user_article_topic_name %></a>
                                <p class="remarks">简介：默认简介为空</p>
                                <div class="meta">
                                    <span>文章数：{{message}}</span>
                                    <a href="">编辑</a>
                                </div>
                            </div>
                        </li>
                        <% }) %>
                    </ul>
                    <!--page start-->
                    <% include ../pages/topic_page.ejs %>
                    <!--page end-->
                </div>


            </div>

            <div class="col-xs-12 col-sm-4 col-md-4 aside">
                <% include user_center_aside.ejs %>
            </div>

        </div>
    </div>
</section>
<!--article-list-lay layout-content end-->


<!--footer_view.ejs start-->
<% include ../parts/footer_view.ejs %>
<!--footer_view.ejs end-->


<!-- template for the modal component -->
<script type="text/x-template" id="modal-template">
    <transition name="modal">
        <div class="modal-mask">
            <div class="modal-wrapper">
                <div class="modal-container">

                    <div class="modal-header">
                        <slot name="header">
                            default header
                        </slot>
                    </div>

                    <div class="modal-body">
                        <slot name="body">
                            default body
                        </slot>
                    </div>

                    <div class="modal-footer">
                        <slot name="footer">
                            default footer
                            <button class="modal-default-button" @click="$emit('close')">
                                OK
                            </button>
                        </slot>
                    </div>
                </div>
            </div>
        </div>
    </transition>
</script>

<script>

  // register modal component
  Vue.component('modal', {
    template: '#modal-template'
  })


  new Vue({
    el: '#user-center-topic',
    data: {
      message: '11',
      showModal: false
    },
    methods: {
      create_new_user_topic: function () {
        alert(1)
      }
    }
  })
</script>

</body>

<% include ../parts/footer.ejs %>